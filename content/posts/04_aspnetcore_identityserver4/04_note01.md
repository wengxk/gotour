---
title: "The OAuth 2.0 Authorization Framework"
date: 2019-11-16
type:
- post
- posts
categories:
- ASP.NET CORE and IdentityServer4
---

## 1. 介绍

在传统的client-server认证模式中，客户端先将机密信息发往资源服务器，验证通过后再获取受保护的资源信息。
现如今的互联网发展中，众多的应用之间存在互相获取资源的需要，如果还是通过传统的认证与授权手段，即将重要的
个人机密信息共享于第三方应用，那么用户个人的信息安全将无法得到保证，存在有以下弊端：

- 增加了用户个人机密信息泄露的可能性：第三方应用可能会将用户个人机密信息存储到其本地，可能就是直接明文存储，
  任何对第三方应用的攻击都有可能使得用户机密信息泄露。
- 无法更精细地控制第三方应用访问资源服务器的权限：因为在拥有了用户个人机密信息后，第三方应用将会拥有该用户的全部权限。
- 用户难以回收权限：除非修改密码，否则第三方应用将可以一直使用用户个人机密信息来获取用户资源。

OAuth 框架在客户端和资源所有者之间引入了一个授权层，客户端在征得用户同意后，授权层将会下发授权信息，即 `access token`， 然后客户端
可以拿着这个授权信息与资源服务器通信，验证后即可获取到被保护的用户资源。

## 1.1 角色

OAuth 框架定义四个角色：

- resource owner  
  资源所有者，有权限授权访问该资源的实体，一般即为终端用户。
- resource server  
  资源服务器，能够接受并响应访问被保护的资源请求。
- client  
  客户端，能够以资源所有者的身份发出访问被保护资源的请求。
- authorization server  
  授权服务器，即在上述介绍的授权层中工作的组件，能够在客户端验证通过后下发 `access token`。

## 1.2 协议工作流程

