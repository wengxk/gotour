---
title: "使用vi编辑文件"
date: 2020-01-13
type:
- post 
- posts
categories:
- linux
---

## 介绍

所有的 Unix Like 系统都会内建 vi（visual editor） 文书编辑器，其他的文书编辑器则不一定会存在。

目前我们使用比较多的是 vim（表示 Vi IMproved，改进的 vi）编辑器。vi命令通常是 vim 程序的别名或符号链接。

`[wengxk@iZbp18jvb8bcz0lwwy399eZ ~]$ type vi`

vi is aliased to `vim'

查看vim的版本和特性。

`[wengxk@iZbp18jvb8bcz0lwwy399eZ ~]$ vi --version`

## 模式

vi支持两种模式：

- 命令模式（command mode）：键入的命令会发生相应的响应动作，例如移动光标、翻屏、查找文本之类
- 插入模式（insert mode）：可以实际编辑文件，键入的文本会被插入到文件中，而不是响应文本对应的命令

两种模式的转换：

- `i`: command mode -> insert mode ：在当前位置的字符的前面进入插入模式。
- `a`: command mode -> insert mode ：在当前位置的字符的后面进入插入模式。
- `esc`: insert mode -> command mode

## 开始和退出vi

### 开始vi

`vi filename`

打开文件，如果文件存在，则文件的第一页内容会展示在屏幕上；如果文件不存在，则会创建并且会展示空的内容在屏幕上。

`vi -r filename`

添加参数-r，指示系统崩溃时恢复文件。

### 退出vi

工作于命令模式，如果您正处于插入模式，请先按下 `Esc` 键切换到命令模式。

- `:w` ：保存但不退出。
- `:w` filename ：保存内容到filename中，但不退出。
- `:w!` ：强制保存，不退出。
- `:wq` ：保存并退出。
- `:wq!` ：强制保存并退出。
- `:q` ：退出，当没有修改文件时可以使用该命令。
- `:q!` ：强制退出并丢弃所有更改。这是消除麻烦的一个常见命令。
- `ZZ` ：如果文件已修改，那么请写入它。然后退出。这是正常退出 vi 的常见命令。
- `:e!` ：丢弃当前更改，回滚到上次保存时的内容开始编辑。

## 移动



- [https://www.cs.colostate.edu/helpdocs/vi.html](https://www.cs.colostate.edu/helpdocs/vi.html)
- [https://www.ibm.com/developerworks/cn/linux/l-lpic1-103-8/index.html?ca=drs-](https://www.ibm.com/developerworks/cn/linux/l-lpic1-103-8/index.html?ca=drs-)